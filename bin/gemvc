#!/usr/bin/env php
<?php

if (file_exists(__DIR__ . '/../../../autoload.php')) {
    require __DIR__ . '/../../../autoload.php';  // When installed as dependency
} else {
    require __DIR__ . '/../vendor/autoload.php';  // When in development
}

// Verify installation
try {
    \Gemvc\CLI\InstallationTest::verify();
} catch (\Exception $e) {
    echo "\033[31mCLI Installation Error: " . $e->getMessage() . "\033[0m\n";
    exit(1);
}

$command = $argv[1] ?? '';
$args = array_slice($argv, 2);

switch ($command) {
    case 'create:service':
        $handler = new \Gemvc\CLI\Commands\CreateService($args);
        $handler->execute();
        break;
    
    default:
        echo "Unknown command: $command\n";
        echo "Available commands:\n";
        echo "  create:service <ServiceName>  Create a new service\n";
        exit(1);
} 